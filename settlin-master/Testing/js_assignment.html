<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>JS Assignment</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="index.css">
    </head>
<body>
    <div style="text-align: center;">
        <div id="box">
            <form >
                <div class="container">
                    <div id="title">
                        <h2>Profile</h2>
                    </div>
                </div>
                <div class="container">
                    <div class="labels">
                        <label> Name: </label>
                    </div>
                    <div class="fields">
                        <input type="text" id="name" placeholder="ProfileName">
                    </div>
                </div>
                <div class="container">
                    <div class="labels">
                        <label> DOB: </label>
                    </div>
                    <div class="fields">
                        <input type="date" id="date" onchange="myChange()">
                    </div>
                </div>
                <div class="container">
                    <div class="labels">
                        <label> Age: </label>
                    </div>
                    <div class="fields">
                        <input type="tel" id="age" placeholder="Age" disabled>
                    </div>
                </div>
                <div class="container">
                    <div class="labels">
                        <label> Hobbies: </label>
                    </div>
                    <div class="fields">
                        <select id="hobbies" multiple>
                            <option>cooking</option>
                            <option>playing cricket</option>
                            <option>listening</option>
                            <option>reading</option>
                            <option>writting</option>
                        </select>
                    </div>
                </div>
                <div class="container">
                    <div class="labels">
                        <button type="button" id="count1">Add User</button>
                    </div>
                    <div class="labels">
                        <button type="reset" id="count2">Reset</button>
                    </div>
                </div>
            </form>
        </div> 
    </div>
    
    <div>
        &nbsp;
    </div>
    
    <div>
        <table id="myTable">
            <tr id="trow">
                <th>Name</th>
                <th>Dob</th>
                <th>Age</th>
                <th>Hobbies</th>
            </tr>
        </table>
    </div>

    <script>
        var arr = [];
        document.querySelector('#count1').onclick = call;
        var count=0;
        var kl=0;
        function call() {   
            kl++;
            if (kl==3) {
                document.getElementById("count1").style.display="none";
                document.getElementById("count2").style.display="none";
                document.getElementById("myTable").style.display = "block";
                document.getElementById("box").style.display = "none";
            }
            
            console.log(count);
            var name1=document.getElementById("name").value;
                
            var date1=new Date();

            var date2=document.getElementById("date").value;

            var date3=new Date(date2);

            var fage=date1.getFullYear()-date3.getFullYear();

            document.getElementById("age").value = fage;

            var x = document.getElementById("hobbies");
            var ay=[];
            for (var i = 0; i < x.options.length; i++) {
                if (x.options[i].selected == true) {
                    ay.push(x.options[i].value);
                    console.log(x.options[i].value);
                }
            }
            
            var obj1 = { name1, date2, fage, ay };
            console.log(obj1);

            count++;

            for(j=count-1;j<count;j++) {
                arr.push(obj1);
                var table = document.getElementById("myTable");
                var row = table.insertRow(1);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);

                cell1.innerHTML =arr[j].name1;
                cell2.innerHTML =arr[j].date2;
                cell3.innerHTML =arr[j].fage;
                cell4.innerHTML =arr[j].ay.toString();
            }

            console.log(arr);
                
        }

        function myChange() {
            var date1 = new Date();
            var date2 = document.getElementById("date").value;
            var date3 = new Date(date2);
            var fage = date1.getFullYear() - date3.getFullYear();
            document.getElementById("age").value = fage;
        }
    </script>
</body>
</html>
